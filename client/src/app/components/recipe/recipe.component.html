<main>

  <section class="header-section">
    <h1>{{recipe.title}}</h1>
    <button 
      *ngIf="recipe.username == authService.getAuthenticatedUsername() || authService.isAdmin()" 
      class="delete-btn"
      (click)="deleteRecipe(recipe.id)">delete</button>
  </section>

  <p class="owner-username" routerLink="/user/{{recipe.username}}">{{recipe.username}}</p>

  <section class="central-section">
      <img class="recipe-img" src="{{recipe.img}}" alt="img of recipe" onerror="this.src='/assets/img/on-error.jpg'">

      <div class="ingredients">
        <h3 class="ingredients-header">Ingredients: </h3>
        <ng-container *ngFor="let ingredient of ingredients">
          <p><span class="ingredient-component" routerLink="/recipes/byComponent/{{ingredient.componentName}}">
            {{ingredient.componentName | align : 30 : '-'}} </span>{{ingredient.amount}} {{ingredient.amountType}}
          </p>
        </ng-container>
      </div>

  </section>

  <section class="info-section">

    <button class="red-btn">Send recipe to email <em class="fas fa-chevron-right"></em></button>

    <p class="rate">
      <em class="fas fa-star"></em>
      <em class="fas fa-star"></em>
      <em class="fas fa-star"></em>
      <em class="fas fa-star"></em>
      <em class="fas fa-star-half-alt"></em>
      <span> {{recipe.avgRate | number: '1.2' }}/5.00</span>
    </p>

    <p class="recipe-time"><span class="iconify" data-icon="bi:clock" data-inline="false"> </span> < {{timeTypeEnum[recipe.timeType]}} min.</p>
  </section>

  <section class="directions-section">
    <h2>Directions: </h2>

    <div class="step" *ngFor="let direction of directions">
      <p class="step-header">Step {{direction.order}}</p>
      <p class="step-description">{{direction.description}}</p>
    </div>

  </section>

  <section class="reviews-section">
    <h2>Reviews: </h2>

    <div class="reviews">
      <ng-container *ngFor="let comment of comments">
        <div class="review-details">
          <img class="profile-img" src="{{comment.userImg}}" alt="user avatar" onerror="this.src='/assets/img/on-error.jpg'">
          <p class="username" routerLink="/user/{{comment.username}}" >{{comment.username}}</p>
          <p class="review-date">{{comment.dateCreated | date:"dd.MM.yyyy - HH:MM"}}</p>
        </div>
        <p class="review">{{comment.body}}</p>
      </ng-container>
    </div>

    <div class="comment-container">
      <textarea placeholder="Add comment.." class="">
      </textarea>
      <button class="tag-btn">Send <em class="fas fa-paper-plane"></em></button>
    </div>


  </section>
</main>
